---
import { addAgent } from "../../js/backend.mjs";
let message = '';
if (Astro.request.method === "POST") {
  const formData = await Astro.request.formData();
  const response = await addAgent(formData);
  message = response.message;
}
import Layout from '../../layouts/Base.astro'
---
<Layout>
<div class="max-w-md mx-auto mt-8 p-6 bg-white rounded-lg shadow-md">
  <h1 class="text-2xl font-bold mb-4 text-gray-800">Ajouter une offre</h1>
  <p class="mb-4 text-sm text-gray-600">{message}</p>
  <form action="/agents/add" method="POST" enctype="multipart/form-data" class="space-y-4">
    <input 
      type="text" 
      name="Nom" 
      placeholder="Nom de l'agent" 
      required 
      class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
    />
    <input 
      type="text" 
      name="Prenom" 
      placeholder="Prenom de l'agent" 
      class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
    />
    <input 
      type="email" 
      name="Email" 
      placeholder="Email de l'agent" 
      class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
    />
    <button 
      type="submit"
      class="w-full py-2 px-4 bg-blue-600 hover:bg-blue-700 focus:ring-blue-500 focus:ring-offset-blue-200 text-white transition ease-in duration-200 text-center text-base font-semibold shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 rounded-lg"
    >
      Ajouter
    </button>
  </form>
</div>
</Layout>