---
import { addOffre } from "../../js/backend.mjs";
let message = '';
if (Astro.request.method === "POST") {
  const formData = await Astro.request.formData();
  const response = await addOffre(formData);
  message = response.message;
}
---

<div class="max-w-md mx-auto mt-8 p-6 bg-white rounded-lg shadow-md">
  <h1 class="text-2xl font-bold mb-4 text-gray-800">Ajouter une offre</h1>
  <p class="mb-4 text-sm text-gray-600">{message}</p>
  <form action="/add" method="POST" enctype="multipart/form-data" class="space-y-4">
    <input 
      type="text" 
      name="nomMaison" 
      placeholder="Nom de la maison" 
      required 
      class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
    />
    <input 
      type="number" 
      name="prix" 
      placeholder="Prix" 
      required min="0"
      class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
    />
    <input 
      type="number" 
      name="nbSdb" 
      placeholder="Nombre de salles de bain" 
      class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
    />
    <input 
      type="number" 
      name="nbChambres" 
      placeholder="Nombre de chambres" 
      class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
    />
    <input 
      type="number" 
      name="surface" 
      placeholder="Superficie" 
      class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
    />
    <input 
      type="file" 
      name="images" 
      class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
    />
    <button 
      type="submit"
      class="w-full py-2 px-4 bg-blue-600 hover:bg-blue-700 focus:ring-blue-500 focus:ring-offset-blue-200 text-white transition ease-in duration-200 text-center text-base font-semibold shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 rounded-lg"
    >
      Ajouter
    </button>
  </form>
</div>